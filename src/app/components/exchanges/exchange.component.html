<div class="container">
  <div class="row align-items-center">
    <div class="col-12 pt-5">
      <p class="pt-4 text-uppercase">MIS TICKETS</p>
    </div>
  </div>

  <!-- FALLBACK -->
  <div class="fallback_box" *ngIf="exhanges.length == 0">
    <div class="align-self-center w-100 p-3 text-center" style="margin-top: -115px;">
      <h5 class=“font-regular”>Aún no has realizado ningún canje</h5>
    </div>
  </div>

  <ng-container *ngIf="exhanges.length > 0">
    <div class="row" *ngFor="let exchange of exhanges">
      <div class="col-12 bg_gray_ligther text-center">
        <div>
          <p class="py-3 h6 m-0 text-uppercase font-weight-bold">{{ exchange.date | date }}</p>
        </div>
      </div>
      <div class="col-12">
        <h6 class="py-3 m-0 font-roboto font-weight-bold letspc-5 text-uppercase font-orange">{{ exchange.menu.name }}</h6>
        <ul class="list-group mb-4">
          <li class="list-group-item">{{ exchange.menu.description }}</li>
          <li class="list-group-item" *ngFor="let item of exchange.menu.garnish">{{ item }}</li>
          <li class="list-group-item border-top-0">
            <button class="btn btn-md btn-block bg_gray text-white font-roboto font-weight-bold letspc-5 text-uppercase" (click)="openModal(exchange, 1)">Vender
              ticket
            </button>
            <button class="btn btn-md btn-block bg_gray text-white font-roboto font-weight-bold letspc-5 text-uppercase" (click)="openModal(exchange, 2)"
              *ngIf="parseCurrentDate !== exchange.date">Cancelar ticket
            </button>
          </li>
        </ul>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal mx-2 fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
      [ngStyle]="{'display': modalIsOpen ? 'block' : 'none', 'opacity': 1}">
      <div class="modal-dialog-centered" role="document">
        <div class="modal-content shadow-medium">
          <div class="modal-body text-center" *ngIf="exchangeSelected">
            <p class="h2 font-weight-light">¿Estás seguro de {{ type }} tu ticket?</p>
            <p>
              <button type="button" class="btn px-5 bg_gray text-white font-roboto font-weight-bold letspc-5 text-uppercase" data-dismiss="modal"
                (click)="sellTicket(exchangeSelected)" *ngIf="type == 'vender'">Confirmar</button>
              <button type="button" class="btn px-5 bg_gray text-white font-roboto font-weight-bold letspc-5 text-uppercase" data-dismiss="modal"
                (click)="cancelExchage(exchangeSelected)" *ngIf="type == 'cancelar'">Confirmar</button>
            </p>
            <p>
              <span class="font-orange btn btn-md btn-link" (click)="closeModal()">Cancelar</span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <div class="modal-backdrop fade show" *ngIf="modalIsOpen"></div>
</div>